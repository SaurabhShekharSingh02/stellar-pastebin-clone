<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Stellar Codes Pastebin</title>
  <style>
    body {
      margin: 0;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      font-family: "Poppins", sans-serif;
      background: linear-gradient(135deg, #5e2ced, #8e44ad, #c0392b);
      overflow: hidden;
      color: #111;
      font-weight: bold;
      position: relative;
    }

    #bubbleCanvas {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      z-index: 0;
      pointer-events: none;
    }

    .brand {
      position: absolute;
      top: 10px; left: 16px;
      font-size: 12px;
      font-weight: 700;
      letter-spacing: 1px;
      color: #fff;
      text-shadow: 0 0 6px rgba(0,0,0,0.6);
      z-index: 5;
    }

    .card {
      position: relative;
      width: 90%;
      max-width: 700px;
      padding: 24px;
      border-radius: 20px;
      background: rgba(255, 255, 255, 0.9);
      backdrop-filter: blur(14px);
      border: 1px solid rgba(0, 0, 0, 0.1);
      box-shadow: 0 8px 40px rgba(0, 0, 0, 0.3);
      z-index: 2;
      display: flex;
      flex-direction: column;
      gap: 14px;
      color: #111;
      font-weight: bold;
    }

    h1 { margin: 0; font-size: 22px; text-align: center; color: #2c003e; }

    label { font-size: 13px; margin-bottom: 4px; display: block; color: #2c003e; }

    textarea {
      width: 100%; min-height: 160px; resize: vertical;
      background: #f9f9f9; color: #111; font-family: monospace;
      border: 1px solid #ccc; border-radius: 12px;
      padding: 12px; font-size: 14px; font-weight: bold;
    }
    textarea:focus { box-shadow: 0 0 10px #5e2ced; outline: none; }

    input[type="date"] {
      width: 100%; padding: 10px; border-radius: 10px; border: 1px solid #ccc;
      background: #fff; color: #111; font-size: 13px; font-weight: bold;
    }

    #generateBtn {
      width: 100%; border: none; border-radius: 50px;
      padding: 12px; background: linear-gradient(90deg, #5e2ced, #8e44ad, #c0392b);
      color: white; font-weight: bold; font-size: 14px;
      cursor: pointer; transition: 0.3s;
    }
    #generateBtn:hover { transform: translateY(-2px); box-shadow: 0 4px 14px rgba(0,0,0,0.4); }

    .url-box { display: none; align-items: center; gap: 8px; }
    .url-box input {
      flex: 1; background: #f9f9f9; color: #111;
      border: 1px solid #ccc; border-radius: 8px;
      padding: 8px; font-size: 12px; font-weight: bold;
    }
    .url-box button {
      padding: 6px 10px; border-radius: 6px; border: none;
      background: #5e2ced; color: #fff; font-size: 11px;
      font-weight: bold; cursor: pointer;
    }

    /* Result Page Styling */
    .result-page {
      padding:20px;
      font-family:monospace;
      background:rgba(255,255,255,0.85);
      border-radius:20px;
      max-width:800px;
      margin:80px auto;
      z-index:2;
      position:relative;
    }
    .result-page h2 {
      font-size:20px;
      margin-bottom:10px;
      color:#2c003e;
      text-align:center;
    }
    .result-page pre {
      white-space:pre-wrap;
      font-weight:bold;
      color:#111;
      background:#f0f0f0;
      padding:12px;
      border-radius:10px;
      max-height:60vh;
      overflow:auto;
    }
    .result-page p { font-size:12px;color:#333;text-align:center; }
  </style>
</head>
<body>
  <canvas id="bubbleCanvas"></canvas>
  <audio id="popSound" preload="auto">
    <source src="https://www.soundjay.com/buttons/sounds/button-16.mp3" type="audio/mpeg">
  </audio>
  <audio id="bgMusic" autoplay loop>
    <source src="https://www.bensound.com/bensound-music/bensound-slowmotion.mp3" type="audio/mpeg">
  </audio>

  <div id="mainApp" style="display:flex; align-items:center; justify-content:center; width:100%; height:100vh; position:relative; z-index:2;">
    <div class="brand">ðŸŒŸ STELLAR CODES</div>
    <main class="card">
      <h1>ðŸš€ Paste + Generate URL</h1>
      <label for="content">Your Content</label>
      <textarea id="content" placeholder="Type your text/code here..."></textarea>

      <label for="expiry">Expiry Date</label>
      <input type="date" id="expiry" />

      <button id="generateBtn">Generate URL âœ¨</button>

      <div class="url-box" id="urlBox">
        <input type="text" id="url" readonly />
        <button type="button" id="copyBtn">Copy</button>
      </div>
    </main>
  </div>

  <script>
    const content = document.getElementById("content");
    const expiry = document.getElementById("expiry");
    const generateBtn = document.getElementById("generateBtn");
    const urlBox = document.getElementById("urlBox");
    const urlInput = document.getElementById("url");
    const copyBtn = document.getElementById("copyBtn");
    const popSound = document.getElementById("popSound");

    generateBtn.addEventListener("click", () => {
      const text = content.value.trim();
      if (!text) { alert("Please enter some content!"); return; }
      const expDate = expiry.value || "never";
      const encoded = encodeURIComponent(text);
      const generatedUrl = window.location.origin + window.location.pathname + `?paste=${encoded}&expiry=${expDate}`;
      urlInput.value = generatedUrl;
      urlBox.style.display = "flex";
    });

    copyBtn.addEventListener("click", () => {
      navigator.clipboard.writeText(urlInput.value);
      copyBtn.textContent = "Copied!";
      setTimeout(() => copyBtn.textContent = "Copy", 1500);
    });

    const params = new URLSearchParams(window.location.search);
    if (params.has("paste")) {
      document.body.innerHTML = `
        <canvas id="bubbleCanvas"></canvas>
        <audio id="popSound" preload="auto">
          <source src="https://www.soundjay.com/buttons/sounds/button-16.mp3" type="audio/mpeg">
        </audio>
        <audio id="bgMusic" autoplay loop>
          <source src="https://www.bensound.com/bensound-music/bensound-slowmotion.mp3" type="audio/mpeg">
        </audio>
        <div class="result-page">
          <h2>ðŸŒŸ STELLAR CODES PASTE</h2>
          <pre>${decodeURIComponent(params.get("paste"))}</pre>
          <p>Expiry: ${params.get("expiry")}</p>
        </div>
      `;
    }

    /* Bubble Animation */
    function initBubbles() {
      const canvas = document.getElementById("bubbleCanvas");
      const ctx = canvas.getContext("2d");
      let bubbles = [];
      resizeCanvas();
      window.addEventListener("resize", resizeCanvas);

      function resizeCanvas() {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
      }

      class Bubble {
        constructor() {
          this.x = Math.random() * canvas.width;
          this.y = canvas.height + Math.random() * 100;
          this.radius = 10 + Math.random() * 20;
          this.speed = 1 + Math.random() * 2;
          this.angle = Math.random() * Math.PI * 2;
          this.spin = (Math.random() - 0.5) * 0.05;
        }
        update() {
          this.y -= this.speed;
          this.x += Math.sin(this.angle) * 0.5;
          this.angle += this.spin;
          if (this.y + this.radius < 0) {
            const popSound = document.getElementById("popSound");
            popSound.currentTime = 0;
            popSound.play();
            this.reset();
          }
        }
        reset() {
          this.x = Math.random() * canvas.width;
          this.y = canvas.height + Math.random() * 50;
          this.radius = 10 + Math.random() * 20;
          this.speed = 1 + Math.random() * 2;
          this.angle = Math.random() * Math.PI * 2;
        }
        draw() {
          let gradient = ctx.createRadialGradient(this.x, this.y, this.radius * 0.2, this.x, this.y, this.radius);
          gradient.addColorStop(0, "rgba(255, 100, 100, 0.9)");
          gradient.addColorStop(0.5, "rgba(200, 30, 30, 0.6)");
          gradient.addColorStop(1, "rgba(120, 0, 0, 0.3)");
          ctx.beginPath();
          ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);
          ctx.fillStyle = gradient;
          ctx.fill();
        }
      }

      for (let i = 0; i < 30; i++) { bubbles.push(new Bubble()); }

      function animate() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        bubbles.forEach(b => { b.update(); b.draw(); });
        requestAnimationFrame(animate);
      }
      animate();
    }
    initBubbles();
  </script>
</body>
</html>